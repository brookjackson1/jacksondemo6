{% extends "base.html" %}

{% block content %}

<div class="container mt-4">
    <a href="{{ url_for('movies.index') }}" class="btn btn-secondary mb-3">
        <i class="fas fa-arrow-left"></i> Back to Movies
    </a>

    <div class="row">
        <div class="col-md-4">
            {% if movie.poster and movie.poster != 'N/A' %}
                <img src="{{ movie.poster }}" alt="{{ movie.title }}" class="img-fluid rounded shadow">
            {% else %}
                <div class="text-center p-5 bg-light rounded">
                    <i class="fas fa-film fa-5x text-muted"></i>
                    <p class="mt-3">No poster available</p>
                </div>
            {% endif %}
        </div>
        <div class="col-md-8">
            <h1>{{ movie.title }}</h1>

            <div class="mb-3">
                <span class="badge badge-primary">{{ movie.year or 'Year Unknown' }}</span>
                <span class="badge badge-info">{{ movie.genre or 'Genre Unknown' }}</span>
            </div>

            <h5>Director</h5>
            <p>{{ movie.director or 'Unknown' }}</p>

            <h5>Actors</h5>
            <p>{{ movie.actors or 'Unknown' }}</p>

            <h5>Plot</h5>
            <p>{{ movie.plot or 'No plot available' }}</p>

            <hr>

            <div class="mt-4">
                <a href="{{ url_for('movies.fetch_data', movie_id=movie.movie_id) }}" class="btn btn-primary">
                    <i class="fas fa-download"></i> Refresh Data
                </a>
                <a href="{{ url_for('movies.edit_movie', movie_id=movie.movie_id) }}" class="btn btn-warning">
                    <i class="fas fa-edit"></i> Edit
                </a>
                <a href="{{ url_for('movies.delete_movie', movie_id=movie.movie_id) }}"
                   class="btn btn-danger"
                   onclick="return confirm('Are you sure you want to delete this movie?')">
                    <i class="fas fa-trash"></i> Delete
                </a>
            </div>

            <div class="mt-3">
                <small class="text-muted">
                    Added: {{ movie.created_at.strftime('%Y-%m-%d %H:%M') if movie.created_at else 'N/A' }}<br>
                    Last Updated: {{ movie.updated_at.strftime('%Y-%m-%d %H:%M') if movie.updated_at else 'N/A' }}
                </small>
            </div>
        </div>
    </div>
</div>

<style>
    .badge {
        font-size: 1rem;
        padding: 0.5rem 1rem;
        margin-right: 0.5rem;
    }

    h5 {
        color: var(--gcsu-blue);
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
    }
</style>

{% endblock %}
